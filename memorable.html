<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Memorable — LGM</title>
  <link rel="stylesheet" href="./style.css" />
  <style>
    .mem-hero{padding:36px 0;background:linear-gradient(135deg,#0b0b0f,#14141d);border-bottom:1px solid rgba(255,255,255,0.06)}
    .mem-hero h1{margin:0 0 6px 0}
    .mem-hero p{margin:0;opacity:.9}

    .mem-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:14px;margin-top:18px}
    .mem-card{position:relative;border-radius:14px;overflow:hidden;background:#0f0f15;box-shadow:0 10px 24px rgba(0,0,0,0.35);outline:1px solid rgba(255,255,255,0.06)}
    .mem-card img{display:block;width:100%;height:180px;object-fit:cover;transition:transform .25s ease}
    .mem-card:hover img{transform:scale(1.04)}
    .mem-badge{position:absolute;left:10px;top:10px;background:rgba(0,0,0,0.6);backdrop-filter:blur(4px);color:#ffe082;font-weight:800;border-radius:10px;padding:4px 8px;font-size:12px}
    .mem-caption{position:absolute;inset:auto 0 0 0;display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 10px;color:#fff;font-weight:700;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.75))}
    .mem-cap-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .mem-cap-zoom{background:#111;color:#ffe082;border:1px solid #ffe082;border-radius:10px;padding:6px 8px;font-weight:800;cursor:pointer}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:10000}
    .lightbox.open{display:flex}
    .lightbox-inner{position:relative;max-width:min(96vw,1200px);max-height:92vh}
    .lightbox img{display:block;max-width:100%;max-height:92vh;border-radius:12px;box-shadow:0 30px 80px rgba(0,0,0,0.6)}
    .lightbox .close{position:absolute;right:-8px;top:-8px;background:#000;color:#ffe082;border:1px solid #ffe082;border-radius:10px;padding:8px 10px;font-weight:800;cursor:pointer}
  </style>
</head>
<body>
  <header class="header navbar">
    <div class="container inner">
      <a class="brand" href="index.html" aria-label="Accueil LGM">
        <span class="brand-badge"></span>
        <span class="brand-name">LGM • Communauté</span>
      </a>
      <nav class="nav-links">
        <a href="index.html">Accueil</a>
        <a href="lgm.html">LGM Member</a>
        <a href="videos.html">Vidéos</a>
        <a class="active" href="memorable.html">Memorable</a>
        <div style="display:flex;align-items:center;gap:8px">
          <span style="font-weight:700;opacity:.9">VOL</span>
          <input id="musicVol" type="range" min="0" max="1" step="0.01" value="0.8" style="width:110px">
          <button id="musicBtn" class="btn btn-ghost" type="button">Activer la musique</button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="mem-hero">
      <div class="container">
        <h1>Memorable</h1>
        <p>Une sélection d’images et moments marquants de la communauté.</p>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <div id="memGrid" class="mem-grid"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container inner">
      © <span id="year"></span> LGM
    </div>
  </footer>

  <!-- Audio site -->
  <audio id="siteAudio" src="./sasa.mp3" preload="auto"></audio>

  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="Agrandissement image">
    <div class="lightbox-inner">
      <button class="close" type="button" aria-label="Fermer">Fermer ✕</button>
      <img id="lightboxImg" src="" alt="Aperçu" />
    </div>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Données images (depuis assets/affiche)
    const IMAGES = [
      {file:'bb.png', label:'bb'},
      {file:'cha.png', label:'cha'},
      {file:'cleagx.jpg', label:'cleagx'},
      {file:'d.png', label:'d'},
      {file:'gg.png', label:'gg'},
      {file:'ggg.png', label:'ggg'},
      {file:'go.png', label:'go'},
      {file:'image.png', label:'image'},
      {file:'image0.gif', label:'image0'},
      {file:'IMG_0306.png', label:'IMG_0306'},
      {file:'li.png', label:'li'},
      {file:'mo.png', label:'mo'},
      {file:'n.png', label:'n'},
      {file:'ss.png', label:'ss'},
      {file:'vit.gif', label:'vit'},
      {file:'yasco.png', label:'yasco'},
      {file:'yasco3.png', label:'yasco3'}
      
    ];

    const grid = document.getElementById('memGrid');

    grid.innerHTML = IMAGES.map((it,i)=>{
      const src = './assets/affiche/' + it.file;
      return `
        <figure class="mem-card" data-i="${i}">
          <span class="mem-badge">#${i+1}</span>
          <img src="${src}" alt="${it.label}" loading="lazy" />
          <figcaption class="mem-caption">
            <span class="mem-cap-text">${it.label}</span>
            <button class="mem-cap-zoom" type="button" data-src="${src}">Zoom</button>
          </figcaption>
        </figure>
      `;
    }).join('');

    // Lightbox
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lightboxImg');
    lb.addEventListener('click', (e)=>{ if(e.target === lb || e.target.classList.contains('close')){ lb.classList.remove('open'); lbImg.src=''; }});
    document.querySelectorAll('.mem-cap-zoom').forEach(btn=>{
      btn.addEventListener('click', ()=>{ lbImg.src = btn.dataset.src; lb.classList.add('open'); });
    });

    // Musique avec persistance
    (function(){
      const storeKey = 'lgm_music_v1';
      const btn = document.getElementById('musicBtn');
      const vol = document.getElementById('musicVol');
      const audio = document.getElementById('siteAudio');
      if(!audio) return;
      let state = { playing:false, volume:0.8, time:0 };
      try{ const s = localStorage.getItem(storeKey); if(s){ state = Object.assign(state, JSON.parse(s)); } }catch(e){}
      function save(){ try{ localStorage.setItem(storeKey, JSON.stringify(state)); }catch(e){} }
      audio.volume = state.volume;
      if(vol) vol.value = String(state.volume);
      audio.addEventListener('loadedmetadata', ()=>{ if(state.time && state.time < audio.duration){ audio.currentTime = state.time; } });
      audio.addEventListener('timeupdate', ()=>{ state.time = audio.currentTime; save(); });
      if(btn){
        btn.textContent = state.playing ? 'Pause musique' : 'Activer la musique';
        btn.addEventListener('click', async ()=>{
          try{
            if(audio.paused){ await audio.play(); state.playing = true; btn.textContent = 'Pause musique'; }
            else { audio.pause(); state.playing = false; btn.textContent = 'Activer la musique'; }
            save();
          }catch(e){ console.warn('Lecture audio bloquée:', e); }
        });
      }
      if(vol){ vol.addEventListener('input', ()=>{ const v = Math.max(0, Math.min(1, parseFloat(vol.value)||0)); audio.volume = v; state.volume = v; save(); }); }
      if(state.playing){ audio.play().catch(()=>{}); }
    })();
  </script>
</body>
</html>