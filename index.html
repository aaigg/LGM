<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LGM — Communauté</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css" />
  <style>
    /* Galerie de miniatures YouTube */
    .videos-section{margin-top:36px}
    .player-embed{background:#000;border-radius:10px;overflow:hidden;padding-top:56.25%;position:relative}
    .player-embed iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
    .videos-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:14px}
    .thumb{position:relative;border-radius:8px;overflow:hidden;cursor:pointer;background:#111}
    .thumb img{display:block;width:100%;height:100%;object-fit:cover}
    .thumb .overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:14px;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.4));opacity:0;transition:opacity .18s}
    .thumb:hover .overlay{opacity:1}
    .thumb.active{outline:3px solid rgba(99,102,241,0.9)}
    .thumb .duration{position:absolute;right:6px;bottom:6px;background:rgba(0,0,0,0.6);padding:3px 6px;border-radius:6px;font-size:12px}
  </style>
</head>
<body>
  <header class="header navbar">
    <div class="container inner">
      <a class="brand" href="index.html" aria-label="Accueil LGM">
        <span class="brand-badge"></span>
        <span class="brand-name">LGM • Communauté</span>
      </a>
      <nav class="nav-links">
        <a class="active" href="index.html">Accueil</a>
        <a href="lgm.html">LGM Member</a>
        <a href="videos.html">Vidéos</a>
        <a href="memorable.html">Memorable</a>
        <div style="display:flex;align-items:center;gap:8px">
          <span style="font-weight:700;opacity:.9">VOL</span>
          <input id="musicVol" type="range" min="0" max="1" step="0.01" value="0.8" style="width:110px">
          <button id="musicBtn" class="btn btn-ghost" type="button">Activer la musique</button>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container inner">
        <div>
          <span class="badge">Bienvenue sur LGM</span>
          <h1>La communauté LGM</h1>
          <p>Partage, entraide et passions communes. Rejoignez un espace convivial où nous créons, échangeons et avançons ensemble.</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <a class="btn btn-primary" href="lgm.html">Découvrir les membres</a>
            <a class="btn btn-ghost" href="videos.html">Voir les vidéos</a>
          </div>
        </div>
        <div class="hero-art" aria-hidden="true"></div>
      </div>
    </section>

    <section class="section videos-section container">
      <h2>Galerie vidéos</h2>
      <div id="playerArea" class="player-embed" aria-label="Lecteur vidéo principal">
        <iframe id="mainPlayer" src="about:blank" title="Lecteur vidéo" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>

      <div id="videosGrid" class="videos-grid" aria-label="Galerie de miniatures">
        <!-- Miniatures insérées par JS -->
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>LGM</h2>
        <div class="cards">
          <article class="card">
            <h3>LGM</h3>
            <p></p>
          </article>
          <article class="card">
            <h3>sarcatz retraite</h3>
            <p>#Jai remballé les crampon les frere</p>
          </article>
          <article class="card">
            <h3>LGM</h3>
            <p>Nique le mossad et la famille rotshield.</p>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container inner">
      © <span id="year"></span> LGM 
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Liste des vidéos fournies (IDs YouTube)
    const VIDEO_IDS = [
      'ylBQbqnx-SM','yWmr_6trVYQ','1G2GW1I-i4c','A7Cj8Trzeeo','hNLRM2K3V1c','vU3rbvj5fUw','iImCh314ut0','Z0zslzdn0hc','MrLYZ246PG4','OH15L7PE6ZU','6rG7QhD_IVs','UQIbWK-UIOU','qC9BdeaL568'
    ];

    const grid = document.getElementById('videosGrid');
    const mainPlayer = document.getElementById('mainPlayer');

    function thumbUrl(id){ return `https://i.ytimg.com/vi/${id}/hqdefault.jpg`; }
    function embedUrl(id){ return `https://www.youtube.com/embed/${id}?rel=0&autoplay=1`; }

    // Create thumbnails
    VIDEO_IDS.forEach((id, idx)=>{
      const div = document.createElement('button');
      div.className = 'thumb';
      div.type = 'button';
      div.dataset.id = id;
      div.innerHTML = `
        <img src="${thumbUrl(id)}" alt="Miniature vidéo ${idx+1}" loading="lazy" />
        <div class="overlay">Regarder</div>
      `;
      div.addEventListener('click', ()=>{
        // remove active class
        document.querySelectorAll('.thumb').forEach(t=>t.classList.remove('active'));
        div.classList.add('active');
        mainPlayer.src = embedUrl(id);
        // scroll to player on small screens
        div.scrollIntoView({behavior:'smooth', block:'center'});
      });
      grid.appendChild(div);
    });

    // Load first video by default
    if(VIDEO_IDS.length>0){
      mainPlayer.src = embedUrl(VIDEO_IDS[0]);
      // mark first thumb active after DOM insert
      setTimeout(()=>{ const first = document.querySelector('.thumb'); if(first) first.classList.add('active'); }, 50);
    }
  </script>

  <!-- Lecteur audio simple (caché) -->
  <audio id="siteAudio" src="./sasa.mp3" preload="auto"></audio>

  <script>
    // Musique avec persistance (play/vol/position)
    (function(){
      const storeKey = 'lgm_music_v1';
      const btn = document.getElementById('musicBtn');
      const vol = document.getElementById('musicVol');
      const audio = document.getElementById('siteAudio');
      if(!audio) return;

      let state = { playing:false, volume:0.8, time:0 };
      try{ const s = localStorage.getItem(storeKey); if(s){ state = Object.assign(state, JSON.parse(s)); } }catch(e){}
      function save(){ try{ localStorage.setItem(storeKey, JSON.stringify(state)); }catch(e){} }

      audio.volume = state.volume;
      if(vol) vol.value = String(state.volume);

      audio.addEventListener('loadedmetadata', ()=>{
        if(state.time && state.time < audio.duration){ audio.currentTime = state.time; }
      });
      audio.addEventListener('timeupdate', ()=>{ state.time = audio.currentTime; save(); });

      if(btn){
        btn.textContent = state.playing ? 'Pause musique' : 'Activer la musique';
        btn.addEventListener('click', async ()=>{
          try{
            if(audio.paused){ await audio.play(); state.playing = true; btn.textContent = 'Pause musique'; }
            else { audio.pause(); state.playing = false; btn.textContent = 'Activer la musique'; }
            save();
          }catch(e){ console.warn('Lecture audio bloquée:', e); }
        });
      }

      if(vol){
        vol.addEventListener('input', ()=>{
          const v = Math.max(0, Math.min(1, parseFloat(vol.value)||0));
          audio.volume = v; state.volume = v; save();
        });
      }

      if(state.playing){ audio.play().catch(()=>{}); }
    })();
  </script>
</body>
</html>                                                                                                         